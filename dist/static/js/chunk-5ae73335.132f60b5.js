(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ae73335"],{3140:function(e,o,t){},"69e8":function(e,o,t){"use strict";var n=t("b63e"),s=t.n(n);s.a},7646:function(e,o,t){"use strict";t.r(o);var n=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-header",[e._v("\n        个人账号管理\n        "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.addBtnClick()}}},[e._v("+添加")]),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:3}},[t("el-input",{attrs:{placeholder:"请输入内容"},on:{change:e.searchKeyWordChange},model:{value:e.inputKeyWord,callback:function(o){e.inputKeyWord=o},expression:"inputKeyWord"}})],1),e._v(" "),t("el-col",{attrs:{span:3}},[t("el-button",{on:{click:function(o){return e.searchBtnAction()}}},[e._v("搜索")])],1)],1),e._v(" "),t("personaccountcreate",{ref:"createPersonAccountView",attrs:{isCreate:e.isCreate},on:{addBtnClick:e.createCompleteWithModel,modifyBtnClick:e.modifyComplete}})],1),e._v(" "),t("el-main",[t("el-container",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"sort-change":e.tableSortChange}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"person_username",label:"用户名",sortable:"custom",width:"150px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"person_password",label:"密码",width:"100px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Rdolp",label:"RdoIp",sortable:"custom",width:"150px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Rdo_username",label:"Rdo用户名",sortable:"custom",width:"150px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Rdo_password",label:"Rdo密码",width:"100px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Rdo_port",label:"Rdo端口",sortable:"custom",width:"150px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"first_login_time",label:"第一次登陆时间",sortable:"custom",width:"150px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"类型",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(e.typeOption[o.row.type]))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"company_id",label:"所属企业主体",width:"110px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"belongto",label:"所属人",width:"100px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"person_status",label:"状态",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(e.statusOption[o.row.person_status]))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cookies",label:"Cookies",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.open(o.row.cookies)}}},[e._v("查看")]),e._v(" "),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:o.row.cookies,expression:"scope.row.cookies"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}],attrs:{type:"text"}},[e._v("    \n                                复制\n                        ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"person_remark",label:"备注",width:"150px"}}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleTableClick(o.row)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleTableDeleteClick(o.row)}}},[e._v("移除")])]}}])})],1)],1),e._v(" "),t("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.changeCurrentPage}})],1)],1)},s=[],l=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("el-container",{attrs:{height:"0"}},[t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.addPersonAccountLoading,expression:"addPersonAccountLoading"}],attrs:{"close-on-press-escape":!1,"element-loading-text":e.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",title:e.title,visible:e.viewVisible,center:"","append-to-body":!0,"lock-scroll":!1,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(o){e.viewVisible=o}}},[t("section",[t("el-container",[t("el-form",{attrs:{"label-width":"130px",inline:!0},model:{value:e.modifyModel,callback:function(o){e.modifyModel=o},expression:"modifyModel"}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{model:{value:e.modifyModel.person_username,callback:function(o){e.$set(e.modifyModel,"person_username",o)},expression:"modifyModel.person_username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{model:{value:e.modifyModel.person_password,callback:function(o){e.$set(e.modifyModel,"person_password",o)},expression:"modifyModel.person_password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"RdoIp"}},[t("el-input",{model:{value:e.modifyModel.Rdolp,callback:function(o){e.$set(e.modifyModel,"Rdolp",o)},expression:"modifyModel.Rdolp"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Rdo用户名"}},[t("el-input",{model:{value:e.modifyModel.Rdo_username,callback:function(o){e.$set(e.modifyModel,"Rdo_username",o)},expression:"modifyModel.Rdo_username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Rdo密码"}},[t("el-input",{model:{value:e.modifyModel.Rdo_password,callback:function(o){e.$set(e.modifyModel,"Rdo_password",o)},expression:"modifyModel.Rdo_password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Rdo端口"}},[t("el-input",{model:{value:e.modifyModel.Rdo_port,callback:function(o){e.$set(e.modifyModel,"Rdo_port",o)},expression:"modifyModel.Rdo_port"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"第一次登陆时间"}},[t("el-input",{model:{value:e.modifyModel.first_login_time,callback:function(o){e.$set(e.modifyModel,"first_login_time",o)},expression:"modifyModel.first_login_time"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"类型"}},[t("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"请选择"},model:{value:e.modifyModel.type,callback:function(o){e.$set(e.modifyModel,"type",o)},expression:"modifyModel.type"}},e._l(e.typeOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"所属企业主体"}},[t("el-autocomplete",{attrs:{"fetch-suggestions":e.queryCompanySearchAsync,placeholder:"请输入企业名搜索"},on:{select:e.handleSelectCompany},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.item;return[t("div",{staticClass:"name"},[e._v(e._s(n.company_name))]),e._v(" "),t("span",{staticClass:"addr"},[e._v(e._s(n.id))])]}}]),model:{value:e.company_id,callback:function(o){e.company_id=o},expression:"company_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所属人"}},[t("el-autocomplete",{attrs:{"fetch-suggestions":e.queryUserSearchAsync,placeholder:"请输入用户名搜索"},on:{select:e.handleSelectUser},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.item;return[t("div",{staticClass:"name"},[e._v(e._s(n.user_name))]),e._v(" "),t("span",{staticClass:"addr"},[e._v(e._s(n.id))])]}}]),model:{value:e.user_id,callback:function(o){e.user_id=o},expression:"user_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"请选择"},model:{value:e.modifyModel.person_status,callback:function(o){e.$set(e.modifyModel,"person_status",o)},expression:"modifyModel.person_status"}},e._l(e.statusOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{model:{value:e.modifyModel.person_remark,callback:function(o){e.$set(e.modifyModel,"person_remark",o)},expression:"modifyModel.person_remark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Cookies"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.modifyModel.cookies,callback:function(o){e.$set(e.modifyModel,"cookies",o)},expression:"modifyModel.cookies"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.viewVisible=!1}}},[e._v("取 消")]),e._v(" "),e.isCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.addPersonConfirmBtnAction()}}},[e._v("添 加")]):t("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.modifyPersonConfirmBtnAction()}}},[e._v("修 改")])],1)],1)])],1)},r=[],i=(t("6b54"),{data:function(){return{statusOption:[{value:0,label:"正常"},{value:1,label:"锁号"}],typeOption:[{value:0,label:"大号"},{value:1,label:"冷号"},{value:2,label:"白号"}],addPersonAccountLoading:!1,loadingText:"",title:"",viewVisible:!1,modifyModel:{},company_id:"",user_id:""}},props:{originModel:null,isCreate:!0},methods:{close:function(){this.closeLoading(),this.viewVisible=!1},show:function(e,o){this.title=e,this.modifyModel=o,null!=this.modifyModel.belongto?this.user_id=this.modifyModel.belongto.toString():this.user_id="",null!=this.modifyModel.company_id?this.company_id=this.modifyModel.company_id.toString():this.company_id="",this.viewVisible=!0},loading:function(e){this.loadingText=e,this.addPersonAccountLoading=!0},closeLoading:function(){this.loadingText="",this.addPersonAccountLoading=!1},addPersonConfirmBtnAction:function(){this.$emit("addBtnClick",this.modifyModel)},modifyPersonConfirmBtnAction:function(){this.$emit("modifyBtnClick",this.modifyModel)},queryCompanySearchAsync:function(e,o){if(null!=e&&0!=e.length){var t={search:e};this.http.post("/company/search",t).then((function(e){o(e.data)})).catch((function(e){o([])}))}else o([])},handleSelectCompany:function(e){this.company_id=e.id.toString(),this.modifyModel.company_id=e.id},queryUserSearchAsync:function(e,o){if(null!=e&&0!=e.length){var t={search:e};this.http.post("/user/search",t).then((function(e){o(e.data)})).catch((function(e){o([])}))}else o([])},handleSelectUser:function(e){this.user_id=e.id.toString(),this.modifyModel.belongto=e.id}}}),a=i,c=(t("b52c"),t("2877")),d=Object(c["a"])(a,l,r,!1,null,"72cfcd32",null),p=d.exports,u={name:"PersonAccountManage",data:function(){return{loading:!1,originModel:null,isCreate:!0,tableData:[],statusOption:["正常","锁号"],typeOption:["大号","冷号","白号"],inputKeyWord:"",currentPage:1,totalCount:0,order:null}},components:{personaccountcreate:p},created:function(){this.loadPersonAccount()},methods:{loadPersonAccount:function(e,o,t){var n=this;null==e&&(e=1);var s={page:e,order:o,search:t};this.http.post("/account/person/all",s).then((function(t){n.order=o,n.currentPage=e,n.totalCount=10*t.data.total_page,n.tableData=t.data.res})).catch((function(e){n.$message({type:"errir",message:"加载个人账号失败"})}))},addBtnClick:function(){this.isCreate=!0;var e={};this.$refs.createPersonAccountView.show("添加个人账号",e)},handleTableClick:function(e){this.originModel=e,this.isCreate=!1;var o={id:e.id,person_username:e.person_username,person_password:e.person_password,cookies:e.cookies,Rdolp:e.Rdolp,Rdo_username:e.Rdo_username,Rdo_password:e.Rdo_password,Rdo_port:e.Rdo_port,first_login_time:e.first_login_time,type:e.type,company_id:e.company_id,belongto:e.belongto,person_status:e.person_status,person_remark:e.person_remark};this.$refs.createPersonAccountView.show("修改个人账号",o)},handleTableDeleteClick:function(e){var o=this;this.$confirm("此操作将删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=o,n={id:e.id};o.http.post("/account/person/delete",n).then((function(e){t.loading=!1,t.loadPersonAccount(),t.$message({type:"success",message:"删除个人账号成功"})})).catch((function(e){t.loading=!1,t.$message({type:"error",message:"删除个人账号失败"})}))})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},createCompleteWithModel:function(e){console.log("createCompleteWithModel"),console.log(e);var o={person_username:e.person_username,person_password:e.person_password,cookies:e.cookies,Rdolp:e.Rdolp,Rdo_username:e.Rdo_username,Rdo_password:e.Rdo_password,Rdo_port:e.Rdo_port,first_login_time:e.first_login_time,type:e.type,company_id:e.company_id,belongto:e.belongto,person_status:e.person_status,person_remark:e.person_remark},t=this;this.$refs.createPersonAccountView.loading("添加个人账号"),this.http.post("/account/person/add",o).then((function(e){t.$refs.createPersonAccountView.close(),t.$message({type:"success",message:"添加个人账号成功"}),t.loadPersonAccount()})).catch((function(e){t.$refs.createPersonAccountView.closeLoading(),t.$message({type:"error",message:"添加个人账号失败"})}))},modifyComplete:function(e){if(e.person_username!=this.originModel.person_username||e.person_password!=this.originModel.person_password||e.cookies!=this.originModel.cookies||e.Rdolp!=this.originModel.Rdolp||e.Rdo_username!=this.originModel.Rdo_username||e.Rdo_password!=this.originModel.Rdo_password||e.Rdo_port!=this.originModel.Rdo_port||e.first_login_time!=this.originModel.first_login_time||e.type!=this.originModel.type||e.company_id!=this.originModel.company_id||e.belongto!=this.originModel.belongto||e.person_status!=this.originModel.person_status||e.person_remark!=this.originModel.person_remark){var o={id:e.id,person_username:null==e.person_username?"":e.person_username,person_password:null==e.person_password?"":e.person_password,cookies:null==e.cookies?"":e.cookies,Rdolp:null==e.Rdolp?"":e.Rdolp,Rdo_username:null==e.Rdo_username?"":e.Rdo_username,Rdo_password:null==e.Rdo_password?"":e.Rdo_password,Rdo_port:0==e.Rdo_port.length?null:e.Rdo_port,first_login_time:null==e.first_login_time?"":e.first_login_time,type:e.type,company_id:e.company_id,belongto:e.belongto,person_status:e.person_status,person_remark:null==e.person_remark?"":e.person_remark},t=this;this.$refs.createPersonAccountView.loading("修改个人账号"),this.http.post("/account/person/modify",o).then((function(e){t.$refs.createPersonAccountView.close(),t.$message({type:"success",message:"修改个人账号成功"}),t.loadPersonAccount()})).catch((function(e){t.$refs.createPersonAccountView.closeLoading(),t.$message({type:"error",message:"修改个人账号失败"})}))}},open:function(e){this.$alert(e,"cookies",{dangerouslyUseHTMLString:!0})},clipboardSuccessHandler:function(e){var o=e.value;e.event;console.log("success",o),this.$message.success("已复制")},clipboardErrorHandler:function(e){var o=e.value;e.event;console.log("error",o)},searchKeyWordChange:function(){this.searchBtnAction()},searchBtnAction:function(){this.inputKeyWord.length>0?this.loadPersonAccount(1,this.order,this.inputKeyWord):this.loadPersonAccount(1)},tableSortChange:function(e){e.column;var o=e.prop,t=e.order,n=0;if("descending"==t);else{if("ascending"!=t)return void this.loadPersonAccount(this.currentPage,null);n=1}var s={prop:o,type:n};this.loadPersonAccount(this.currentPage,s)},changeCurrentPage:function(e){this.inputKeyWord.length>0?this.loadPersonAccount(e,this.currentOrder,this.inputKeyWord):this.loadPersonAccount(e,this.currentOrder)}}},m=u,_=(t("69e8"),Object(c["a"])(m,n,s,!1,null,null,null));o["default"]=_.exports},b52c:function(e,o,t){"use strict";var n=t("3140"),s=t.n(n);s.a},b63e:function(e,o,t){}}]);