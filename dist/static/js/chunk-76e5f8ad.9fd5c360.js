(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76e5f8ad"],{"28a0":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},3022:function(e,t,n){(function(e){var o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++)n[t[o]]=Object.getOwnPropertyDescriptor(e,t[o]);return n},i=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,r=o.length,l=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}})),s=o[n];n<r;s=o[++n])v(s)||!D(s)?l+=" "+s:l+=" "+a(s);return l},t.deprecate=function(n,o){if("undefined"!==typeof e&&!0===e.noDeprecation)return n;if("undefined"===typeof e)return function(){return t.deprecate(n,o).apply(this,arguments)};var i=!1;function r(){if(!i){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),i=!0}return n.apply(this,arguments)}return r};var r,l={};function a(e,n){var o={seen:[],stylize:c};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),b(n)?o.showHidden=n:n&&t._extend(o,n),O(o.showHidden)&&(o.showHidden=!1),O(o.depth)&&(o.depth=2),O(o.colors)&&(o.colors=!1),O(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=s),d(o,e,o.depth)}function s(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function c(e,t){return e}function u(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function d(e,n,o){if(e.customInspect&&n&&k(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(o,e);return w(i)||(i=d(e,i,o)),i}var r=p(e,n);if(r)return r;var l=Object.keys(n),a=u(l);if(e.showHidden&&(l=Object.getOwnPropertyNames(n)),T(n)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return f(n);if(0===l.length){if(k(n)){var s=n.name?": "+n.name:"";return e.stylize("[Function"+s+"]","special")}if(j(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(I(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return f(n)}var c,b="",v=!1,_=["{","}"];if(h(n)&&(v=!0,_=["[","]"]),k(n)){var R=n.name?": "+n.name:"";b=" [Function"+R+"]"}return j(n)&&(b=" "+RegExp.prototype.toString.call(n)),I(n)&&(b=" "+Date.prototype.toUTCString.call(n)),T(n)&&(b=" "+f(n)),0!==l.length||v&&0!=n.length?o<0?j(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=v?m(e,n,o,a,l):l.map((function(t){return g(e,n,o,a,t,v)})),e.seen.pop(),y(c,b,_)):_[0]+b+_[1]}function p(e,t){if(O(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return R(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,o,i){for(var r=[],l=0,a=t.length;l<a;++l)G(t,String(l))?r.push(g(e,t,n,o,String(l),!0)):r.push("");return i.forEach((function(i){i.match(/^\d+$/)||r.push(g(e,t,n,o,i,!0))})),r}function g(e,t,n,o,i,r){var l,a,s;if(s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},s.get?a=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(a=e.stylize("[Setter]","special")),G(o,i)||(l="["+i+"]"),a||(e.seen.indexOf(s.value)<0?(a=v(n)?d(e,s.value,null):d(e,s.value,n-1),a.indexOf("\n")>-1&&(a=r?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n"))):a=e.stylize("[Circular]","special")),O(l)){if(r&&i.match(/^\d+$/))return a;l=JSON.stringify(""+i),l.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=e.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=e.stylize(l,"string"))}return l+": "+a}function y(e,t,n){var o=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function b(e){return"boolean"===typeof e}function v(e){return null===e}function _(e){return null==e}function R(e){return"number"===typeof e}function w(e){return"string"===typeof e}function x(e){return"symbol"===typeof e}function O(e){return void 0===e}function j(e){return D(e)&&"[object RegExp]"===E(e)}function D(e){return"object"===typeof e&&null!==e}function I(e){return D(e)&&"[object Date]"===E(e)}function T(e){return D(e)&&("[object Error]"===E(e)||e instanceof Error)}function k(e){return"function"===typeof e}function S(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function E(e){return Object.prototype.toString.call(e)}function z(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(O(r)&&(r=Object({VUE_APP_CLI_UI_URL:"",VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG||""),n=n.toUpperCase(),!l[n])if(new RegExp("\\b"+n+"\\b","i").test(r)){var o=e.pid;l[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,o,e)}}else l[n]=function(){};return l[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=b,t.isNull=v,t.isNullOrUndefined=_,t.isNumber=R,t.isString=w,t.isSymbol=x,t.isUndefined=O,t.isRegExp=j,t.isObject=D,t.isDate=I,t.isError=T,t.isFunction=k,t.isPrimitive=S,t.isBuffer=n("d60a");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[z(e.getHours()),z(e.getMinutes()),z(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=n("28a0"),t._extend=function(e,t){if(!t||!D(t))return e;var n=Object.keys(t),o=n.length;while(o--)e[n[o]]=t[n[o]];return e};var $="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function V(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function C(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);var i=n.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var r=this,l=function(){return i.apply(r,arguments)};t.apply(this,n).then((function(t){e.nextTick(l,null,t)}),(function(t){e.nextTick(V,t,l)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,o(t)),n}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if($&&e[$]){var t=e[$];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,$,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,o=new Promise((function(e,o){t=e,n=o})),i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);i.push((function(e,o){e?n(e):t(o)}));try{e.apply(this,i)}catch(l){n(l)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),$&&Object.defineProperty(t,$,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=$,t.callbackify=C}).call(this,n("4362"))},"425c":function(e,t,n){"use strict";var o=n("7bd3"),i=n.n(o);i.a},"7bd3":function(e,t,n){},"7d89":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.addRoleLoading,expression:"addRoleLoading"}],attrs:{"close-on-press-escape":!1,"element-loading-text":"添加中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",title:"添加角色",visible:e.dialogTableVisible,center:"","append-to-body":!0,"lock-scroll":!1,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[n("section",[n("el-container",[n("el-form",{attrs:{"label-width":"120px"},model:{value:e.newRole,callback:function(t){e.newRole=t},expression:"newRole"}},[n("el-row",[n("el-col",[n("el-form-item",{attrs:{label:"名字",prop:"name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.newRole.name,callback:function(t){e.$set(e.newRole,"name",t)},expression:"newRole.name"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",[n("el-form-item",{attrs:{label:"Display Name",prop:"display_name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.newRole.display_name,callback:function(t){e.$set(e.newRole,"display_name",t)},expression:"newRole.display_name"}})],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRoleConfirmBtnAction()}}},[e._v("添 加")])],1)],1)]),e._v(" "),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.addRoleToGroupLoading,expression:"addRoleToGroupLoading"}],attrs:{"close-on-press-escape":!1,"element-loading-text":"添加权限中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",title:"添加权限",visible:e.addRolesTableVisible,center:"","append-to-body":!0,"lock-scroll":!1,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addRolesTableVisible=t}}},[n("section",[n("el-container",[[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addRoleItemID,callback:function(t){e.addRoleItemID=t},expression:"addRoleItemID"}},e._l(e.allRolesDisplay,(function(e){return n("el-option",{key:e.id,attrs:{label:e.function_name,value:e.id}})})),1)]],2),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addRolesTableVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRoleToGroupConfirmBtnAction()}}},[e._v("添 加")])],1)],1)]),e._v(" "),n("el-header",[n("el-container",{staticClass:"rolemanageheader"},[e._v("\n            角色管理\n        ")])],1),e._v(" "),n("el-container",[n("el-aside",{staticClass:"role-side-nav",attrs:{width:"150px"}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:e.addBtnAction}},[e._v("添加")]),e._v(" "),n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex,"active-text-color":"#409EFF","collapse-transition":!1},on:{select:e.selectItem}},[n("el-submenu",{attrs:{index:"submenu"}},[n("template",{slot:"title"},[n("span",[e._v("角色")])]),e._v(" "),e._l(e.menu,(function(t){return n("el-menu-item-group",{key:t.index,attrs:{index:t.index}},[n("el-menu-item",{key:t.index,attrs:{index:t.index},domProps:{textContent:e._s(t.display_name)}})],1)}))],2)],1)],1),e._v(" "),n("el-container",[n("el-header",[n("div",[e._v("\n                权限\n                ")]),e._v(" "),n("el-button",{attrs:{type:"primary",round:""},on:{click:e.addRolesBtnAction}},[e._v("添加权限")])],1),e._v(" "),n("el-main",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"function_name",label:"名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"function_description",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteRoleWithRow(t.$index,e.tableData)}}},[e._v("\n                                    移除\n                            ")])]}}])})],1)],1)],1)],1)],1)},i=[],r=(n("ac6a"),n("7f7f"),n("6b54"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"#545c64","text-color":"#fff",router:"","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"modifyroles"}},[e._v("员工角色分配")]),e._v(" "),n("el-menu-item",{attrs:{index:"setroles"}},[e._v("角色权限设置")])],1)}),l=[],a={data:function(){return{activeIndex2:"modifyroles"}},methods:{handleSelect:function(){}},created:function(){console.log("header create"),this.activeIndex2="modifyroles"}},s=a,c=n("2877"),u=Object(c["a"])(s,r,l,!1,null,null,null),d=u.exports,p=(n("3022"),{data:function(){return{menu:[],submenu:"",activeIndex:null,rolesData:{},currentGroupId:0,tableData:[],allRoles:{},allRolesDisplay:[],addRoleLoading:!1,dialogTableVisible:!1,newRole:{name:"",display_name:""},addRoleToGroupLoading:!1,addRolesTableVisible:!1,addRoleItemID:null}},components:{headernav:d},created:function(){this.reloadItems()},methods:{reloadItems:function(){var e=this;this.menu=[],this.http.post("/group/all").then((function(t){for(var n=0;n<t.data.length;n++){var o=t.data[n],i={index:n.toString(),name:o["group_name"],display_name:o["group_display_name"]};e.rolesData[i.index]=o,e.menu.push(i)}e.activeIndex="0";var r=e.rolesData[e.activeIndex];e.currentGroupId=r.id,e.reloadRolesWith(r.id)}))},addRoleConfirmBtnAction:function(){if(null!=this.newRole.name&&0!=this.newRole.name.length)if(null!=this.newRole.display_name&&0!=this.newRole.display_name.length){this.addRoleLoading=!0;var e={group_name:this.newRole.name,display_name:this.newRole.display_name},t=this;t.http.post("/group/add",e).then((function(e){t.addRoleLoading=!1,t.$message({type:"success",message:"添加成功"}),t.reloadItems(),t.dialogTableVisible=!1})).catch((function(e){t.addRoleLoading=!1,t.dialogTableVisible=!1}))}else this.$message({type:"info",message:"Display Name 为空"});else this.$message({type:"info",message:"名字为空"})},addBtnAction:function(e){this.dialogTableVisible=!0},selectItem:function(e){var t=this.rolesData[e];this.currentGroupId!=t.id&&(this.currentGroupId=t.id,this.reloadRolesWith(t.id))},reloadRolesWith:function(e){var t=this;if(null!=e&&0!=e){var n={group_id:e},o=this;this.http.post("/group/function/all",n).then((function(e){console.log(e.data),o.tableData=e.data})).catch((function(e){t.$message({type:"info",message:"获取权限数据失败"})}))}else console.log("group id is nil")},addRolesBtnAction:function(e){var t=this;null!=this.allRolesDisplay&&0!=this.allRolesDisplay.length?this.addRolesTableVisible=!0:this.loadAllRoles((function(){t.addRolesTableVisible=!0}))},addRoleToGroupConfirmBtnAction:function(e){var t=this.addRoleItemID,n=this.allRoles[t];if(null!=t&&null!=n){console.log(n),this.addRoleToGroupLoading=!0;var o={group_id:this.currentGroupId,function_id:n.id},i=this;this.http.post("/group/function/add",o).then((function(e){i.addRoleToGroupLoading=!1,i.addRolesTableVisible=!1,i.$message({type:"success",message:"添加权限成功"}),i.reloadRolesWith(i.currentGroupId)})).catch((function(e){console.log(e),i.addRoleToGroupLoading=!1}))}},loadAllRoles:function(e){var t=this;this.http.post("/function/all").then((function(n){t.allRolesDisplay=n.data,console.log(n.data),n.data.forEach((function(e){var n=e["id"];t.allRoles[n]=e})),null!=e&&e()})).catch((function(t){null!=e&&e()}))},deleteRoleWithRow:function(e,t){var n=t[e],o=this;console.log(n),this.$confirm("此操作将删除该组权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e={group_id:o.currentGroupId,function_id:n.function_id};o.http.post("/group/function/delete",e).then((function(e){o.$message({type:"success",message:"删除成功!"}),o.reloadRolesWith(o.currentGroupId)})).catch((function(e){console.log(e)}))})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))}}}),f=p,m=(n("425c"),Object(c["a"])(f,o,i,!1,null,"8100b8f8",null));t["default"]=m.exports},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}}}]);